import{_ as s,c as i,o as a,a4 as e}from"./chunks/framework.DzXn47Ma.js";const n="/song_blog/assets/2.CdX6TCto.png",t="/song_blog/assets/1.DbKHUCot.png",o="data:image/png;base64,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",r="/song_blog/assets/4.AbXKhvt7.png",l="/song_blog/assets/12.DQa_4imb.png",p="/song_blog/assets/24.mJY6U8qq.png",g="/song_blog/assets/5.C4apWwMr.png",A="/song_blog/assets/6.DZSFNHwX.png",c="/song_blog/assets/7.Bzx7Yy1y.png",d="/song_blog/assets/8.boBfFu-v.png",h="/song_blog/assets/9.Cxh1hWrJ.png",k="/song_blog/assets/10.C2wgekJ0.png",m="/song_blog/assets/11.C1bRM5Ks.png",b="/song_blog/assets/13.B7aB1cYm.png",u="/song_blog/assets/14.BORGrYSv.png",y="/song_blog/assets/16.D6i9d__5.png",C="/song_blog/assets/17.Jy88h9sV.png",_="/song_blog/assets/18.Cas61ZQr.png",E="/song_blog/assets/19.b0Ycgf-m.png",q="/song_blog/assets/20.ONHhMJ1F.png",f="/song_blog/assets/21.BcEI4rA8.png",v="/song_blog/assets/22.CU7hx0XI.png",j="/song_blog/assets/23.SvWW-jFX.png",z=JSON.parse('{"title":"Jenkins","description":"","frontmatter":{},"headers":[],"relativePath":"column/ClassCI&CD/Jenkins/index.md","filePath":"column/ClassCI&CD/Jenkins/index.md"}'),B={name:"column/ClassCI&CD/Jenkins/index.md"},P=e('<h1 id="jenkins" tabindex="-1">Jenkins <a class="header-anchor" href="#jenkins" aria-label="Permalink to &quot;Jenkins&quot;">​</a></h1><h2 id="前置环境" tabindex="-1">前置环境 <a class="header-anchor" href="#前置环境" aria-label="Permalink to &quot;前置环境&quot;">​</a></h2><ul><li>windows11</li><li>docker</li><li>github</li><li>一个简单的 vite 测试列子</li></ul><p>这里就不需要购买线上服务器了，直接本地用 docker 搭建 jenkins，原理是一样的，前端框架就用 vite 打包</p><h2 id="_1-开启-hyper-v" tabindex="-1">1.开启 Hyper-V <a class="header-anchor" href="#_1-开启-hyper-v" aria-label="Permalink to &quot;1.开启 Hyper-V&quot;">​</a></h2><p>控制面板-&gt;程序-&gt;启动活关闭 windows 功能-&gt;勾选 Hyper-V-&gt;确定 <img src="'+n+'" alt="img"></p><p>确定后 window 会自动更新，更新完成后重启电脑</p><h2 id="_2-安装-docker-desktop" tabindex="-1">2.安装 Docker Desktop <a class="header-anchor" href="#_2-安装-docker-desktop" aria-label="Permalink to &quot;2.安装 Docker Desktop&quot;">​</a></h2><p>Docker 官网下载 Docker Desktop 版本：<a href="https://docs.docker.com/get-docker/" target="_blank" rel="noreferrer">下载地址</a><img src="'+t+'" alt="img"></p><p>安装成功后桌面会有 Docker Desktop 的图标，打开后进 docker，账号的话注册不注册都没关系</p><p>如果出现</p><blockquote><p>Update the WSL kernel by running &quot;wsl --update&quot;</p></blockquote><p>则需要升级 wsl2 内核，使用管理员身份打开 cmd， 输入</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">update</span></span></code></pre></div><p><img src="'+o+'" alt="img"></p><p>更新完毕即可再次重启 Docker Desktop，汉化就不需要了，因为主要是用 docker 来加载一个 jenkins 的镜像，docker 需求的内容很少 <img src="'+r+'" alt="img"></p><p>配置 docker 镜像源 没有梯子的小伙伴可以设置一下 docker 的镜像源，这样下载会快很多 <img src="'+l+`" alt="img"></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;registry-mirrors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;https://registry.docker-cn.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;http://hub-mirror.c.163.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;https://mirror.ccs.tencentyun.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h2 id="_3-docker-安装-nginx" tabindex="-1">3.docker 安装 nginx <a class="header-anchor" href="#_3-docker-安装-nginx" aria-label="Permalink to &quot;3.docker 安装 nginx&quot;">​</a></h2><p>新增一个容易，用于启动 nginx 服务器，同样的在 docker desktop 里搜索 nginx，拉去镜像并运行，端口随便写一个</p><p><img src="`+p+'" alt="img"></p><h2 id="_4-docker-安装-jenkins" tabindex="-1">4.docker 安装 jenkins <a class="header-anchor" href="#_4-docker-安装-jenkins" aria-label="Permalink to &quot;4.docker 安装 jenkins&quot;">​</a></h2><p>打开 Docker Desktop，在顶部搜索 jenkins，两个都是 jenkins 的镜像，下面的是最新版本，点击 pull 拉去镜像 <img src="'+g+'" alt="img"></p><p>之后我们点击侧边栏的 images 选择 jenkins， 运行容器 <img src="'+A+'" alt="img"></p><p>容器名字随便取一个，然后下面的断后就使用一个不占用的端口号就行，点击 run <img src="'+c+'" alt="img"></p><p>看到下面界面的时候，jenkins 的服务就启动成功了，图里的红圈的密码一会我们需要用 <img src="'+d+'" alt="img"></p><h2 id="_5-登录-jenkins" tabindex="-1">5.登录 jenkins <a class="header-anchor" href="#_5-登录-jenkins" aria-label="Permalink to &quot;5.登录 jenkins&quot;">​</a></h2><p>点击容器的页面 <img src="'+h+'" alt="img"></p><p>之后输入刚才容器里显示的密码，点击继续 <img src="'+k+'" alt="img"></p><p>然后安装推荐的插件就行，里面有汉化，主题，管道，git，ssh 等等，大概需要几分钟，失败了也没关系，后面我们还能继续在插件市场继续搜索安装的。 <img src="'+m+'" alt="img"></p><p>安装完成后我们就创建一个管理员用户，都可以随便填的 <img src="'+b+'" alt="img"></p><h2 id="_6-配置-jenkins" tabindex="-1">6.配置 jenkins <a class="header-anchor" href="#_6-配置-jenkins" aria-label="Permalink to &quot;6.配置 jenkins&quot;">​</a></h2><h3 id="_1-配置-node-环境" tabindex="-1">1.配置 node 环境 <a class="header-anchor" href="#_1-配置-node-环境" aria-label="Permalink to &quot;1.配置 node 环境&quot;">​</a></h3><p>在 jenkins 插件市场搜索并安装 NodeJS，注意大小写，不然搜索不到，安装完成后重启 jenkins <img src="'+u+'" alt="img"></p><p>接下来打开全局工具配置，配一个全局的 node 环境，因为不同的项目 node 版本不一样，所以为了避免错误，可以要加载不同的 node 环境 <img src="'+y+'" alt="img"></p><h3 id="_2-任务配置" tabindex="-1">2.任务配置 <a class="header-anchor" href="#_2-任务配置" aria-label="Permalink to &quot;2.任务配置&quot;">​</a></h3><p>新建一个自由风格的任务，名称随意</p><p><img src="'+C+'" alt="img"><img src="'+_+'" alt="img"></p><p>在任务里选择源码管理，使用我们建好的 git 仓库，填写分支名称 <img src="'+E+'" alt="img"></p><p>构建环境选择 node 环境，然后选择刚才配置好的 node 版本配置 <img src="'+q+'" alt="img"></p><p>在构建步骤里选择配置好的 node 环境版本，添加新的 shell，填写 npm 相关指令（就是本地打包的那些 script） <img src="'+f+'" alt="img"></p><h3 id="_3-开始构建" tabindex="-1">3.开始构建 <a class="header-anchor" href="#_3-开始构建" aria-label="Permalink to &quot;3.开始构建&quot;">​</a></h3><p>回到工作台，就可以看到构建任务了，然后点击右侧箭头开始构建，此时左侧栏里的构建执行状态就会显示我们当前正在构建的任务 <img src="'+v+'" alt="img"></p><p>稍等片刻，构建成功，打开构建历史，就可以看到以构建的任务，右侧的控制台信息可以方便我们查看构建时的脚本运行情况，失败的话可以在里面查看任务 <img src="'+j+'" alt="img"></p><h2 id="_7-安装-ssh-插件" tabindex="-1">7.安装 SSH 插件 <a class="header-anchor" href="#_7-安装-ssh-插件" aria-label="Permalink to &quot;7.安装 SSH 插件&quot;">​</a></h2><p>插件市场搜索 Publish Over SSH，用于我们构建成功后，把文件发布到服务器上</p><p>由于没有远程测试服务器，本地配置的 docker nginx 无法使用 publish over ssh，所以这一部分先不做讲解</p><p>原理就是服务器会给你对应的访问账号，路径，ssh 等，配置好后，就可以在构建完成后的步骤里直接发布到服务器上</p>',48),x=[P];function R(U,K,X,F,D,I){return a(),i("div",null,x)}const H=s(B,[["render",R]]);export{z as __pageData,H as default};
